static void rtc_setup(void) {

    rcc_enable_rtc_clock();
    rtc_interrupt_disable(RTC_SEC);
    rtc_interrupt_disable(RTC_ALR);
    rtc_interrupt_disable(RTC_OW);

    // Chọn nguồn RTC: RCC_HSE, RCC_LSE, RCC_LSI
    rtc_awake_from_off(RCC_HSE);
    rtc_set_prescale_val(62500);        // 1 Hz
    rtc_set_counter_val(0xFFFFFFF0);    // 16s trước tràn

    nvic_enable_irq(NVIC_RTC_IRQ);

    cm_disable_interrupts();
    rtc_clear_flag(RTC_SEC);
    rtc_clear_flag(RTC_ALR);
    rtc_clear_flag(RTC_OW);
    rtc_interrupt_enable(RTC_SEC);
    rtc_interrupt_enable(RTC_ALR);
    rtc_interrupt_enable(RTC_OW);
    cm_enable_interrupts();
}
